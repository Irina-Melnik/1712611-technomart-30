const modalMapElem=document.querySelector(".modal-map"),miniMapElem=document.querySelector(".main-map"),mapCloseBtn=document.querySelector(".modal-map .modal-close-button"),modalFbackElem=document.querySelector(".modal-feedback"),writeUsElem=document.querySelector(".write-us"),fBackCloseBtn=document.querySelector(".modal-feedback .modal-close-button"),popupFBack=document.querySelector(".modal-feedback"),login=popupFBack.querySelector("[name=login]"),form=popupFBack.querySelector("form"),mail=popupFBack.querySelector("[name=e-mail]"),comment=popupFBack.querySelector("[name=comment]"),modalCartElem=document.querySelector(".modal-cart"),topElem=document.querySelector(".main-products-top"),btnBuyElem=document.querySelector(".button-buy"),cartCloseBtn=document.querySelector(".modal-cart .modal-close-button"),contShopBtn=document.querySelector(".continue-shopping"),modalMakeAnOrder=document.querySelector(".modal-cart .make-an-order"),slider=document.querySelector(".slider-wrapper"),sliderCtrlPrev=slider.querySelector(".slider-control-prev"),sliderCtrlNext=slider.querySelector(".slider-control-next"),sliderBottomCtrlPrev=slider.querySelector(".slider-controls>button:first-child"),sliderBottomCtrlNext=slider.querySelector(".slider-controls>button:nth-child(2)"),sliderItems=slider.querySelectorAll(".slider-item"),serviceSliderControls=document.querySelector(".service-slider-controls"),serviceSliderItems=document.querySelectorAll(".service-slider-item");let lastFocusedElement,slideChange=setInterval(changeSlide,4e3),isStorageSupport=!0,storage="";try{storage=localStorage.getItem("login")}catch(e){isStorageSupport=!1}function hideModalCart(e){e.preventDefault(),modalCartElem.classList.remove("modal-show"),lastFocusedElement.focus()}function changeSlide(){slider.classList.toggle("slider-wrapper-1"),slider.classList.toggle("slider-wrapper-2"),sliderBottomCtrlPrev.classList.toggle("current"),sliderBottomCtrlNext.classList.toggle("current"),sliderItems.forEach(e=>e.classList.toggle("slide-current")),clearInterval(slideChange),slideChange=setInterval(changeSlide,4e3)}function changeService(e){const l=e.target;var t=l.parentElement.children,e=Array.from(t).findIndex(e=>e===l);Array.from(t).forEach(e=>e.classList.remove("service-current")),l.classList.add("service-current"),Array.from(serviceSliderItems).forEach(e=>e.classList.remove("service-slide-current")),serviceSliderItems[e].classList.add("service-slide-current")}miniMapElem.addEventListener("click",function(e){e.preventDefault(),console.log("Клик по ссылке открывает модальное окно с полноразмерной интерактивной картой"),modalMapElem.classList.add("modal-show"),modalMapElem.classList.add("modal-bounce")}),mapCloseBtn.addEventListener("click",function(e){e.preventDefault(),modalMapElem.classList.remove("modal-show")}),writeUsElem.addEventListener("click",function(e){e.preventDefault(),console.log("Клик по кнопке открывает модальное окно с формой обратной связи"),modalFbackElem.classList.add("modal-show"),modalFbackElem.classList.add("modal-bounce"),setTimeout(()=>modalFbackElem.classList.remove("modal-bounce"),600),storage?(login.value=storage,comment.focus()):login.focus()}),form.addEventListener("submit",function(e){login.value&&mail.value&&comment.value?isStorageSupport&&localStorage.setItem("login",login.value):(e.preventDefault(),modalFbackElem.classList.add("modal-error"),setTimeout(()=>modalFbackElem.classList.remove("modal-error"),600))}),fBackCloseBtn.addEventListener("click",function(e){e.preventDefault(),modalFbackElem.classList.remove("modal-show"),modalFbackElem.classList.remove("modal-error")}),window.addEventListener("keydown",function(e){27===e.keyCode&&(modalFbackElem.classList.contains("modal-show")&&(e.preventDefault(),modalFbackElem.classList.remove("modal-show"),modalFbackElem.classList.remove("modal-error")),modalMapElem.classList.contains("modal-show")&&(e.preventDefault(),modalMapElem.classList.remove("modal-show")),modalCartElem.classList.contains("modal-show")&&hideModalCart(e))}),cartCloseBtn.addEventListener("click",hideModalCart),topElem.addEventListener("click",function(e){e.preventDefault(),e.target.classList.contains("button-buy")&&(console.log("Клик по кнопке «Купить» открывает модальное окно с сообщением о добавлении товара в корзину"),lastFocusedElement=e.target.parentElement.parentElement.parentElement,modalCartElem.classList.add("modal-show"),modalCartElem.classList.add("modal-bounce"),modalMakeAnOrder.focus()),e.target.classList.contains("button-add-to-bookmarks")&&console.log("Клик по кнопке «В закладки» добавляет товар в закладки")}),sliderCtrlNext.addEventListener("click",changeSlide),sliderCtrlPrev.addEventListener("click",changeSlide),sliderBottomCtrlPrev.addEventListener("click",changeSlide),sliderBottomCtrlNext.addEventListener("click",changeSlide),serviceSliderControls.addEventListener("click",changeService);